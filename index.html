<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- è§£å†³Bç«™å›¾ç‰‡é˜²ç›—é“¾ æ ¸å¿ƒ -->
    <meta name="referrer" content="no-referrer">
    <title>æˆ‘çš„è½»Bç«™ v1.0</title>
    <style>
        * {margin:0;padding:0;box-sizing:border-box;}
        body {font-family:system-ui;padding-bottom:80px;background:#f4f4f4;}
        .header {padding:12px 16px;background:#fff;box-shadow:0 2px 4px #eee;}
        .hot-title {padding:16px;display:flex;justify-content:space-between;align-items:center;}
        .refresh-btn {padding:6px 12px;border:none;background:#FB7299;color:#fff;border-radius:4px;cursor:pointer;}
        .status {padding:40px 20px;text-align:center;color:#666;}
        .video-list {padding:0 12px;display:grid;grid-template-columns:1fr 1fr;gap:12px;}
        .video-card {background:#fff;border-radius:8px;overflow:hidden;text-decoration:none;color:#333;}
        .video-card img {width:100%;aspect-ratio:16/9;object-fit:cover;}
        .video-card p {padding:8px;font-size:14px;line-height:1.4;}
        .nav {position:fixed;bottom:0;left:0;width:100%;background:#fff;display:flex;justify-content:space-around;padding:10px 0;box-shadow:0 -2px 4px #eee;}
        .nav a {text-decoration:none;color:#666;display:flex;flex-direction:column;align-items:center;font-size:12px;}
        .nav a i {font-size:20px;margin-bottom:4px;}
        .hidden {display:none;}
    </style>
    <!-- å›½å†…å¯è®¿é—®å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdn.staticfile.net/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="header">
        <span>è½» æˆ‘çš„è½»Bç«™ ç¼–ç¨‹å°ç™½ Â· v1.0</span>
    </div>
    <div class="hot-title">
        <h2>ğŸ”¥ ä»Šæ—¥çƒ­é—¨</h2>
        <button class="refresh-btn" id="refresh"><i class="fas fa-sync"></i> åˆ·æ–°</button>
    </div>

    <!-- åŠ è½½çŠ¶æ€ -->
    <div class="status" id="loading"><i class="fas fa-spinner fa-spin"></i> æ­£åœ¨åŠ è½½...</div>
    <!-- å¤±è´¥çŠ¶æ€ï¼ˆä½ çš„åŸæ–‡å­—ï¼‰ -->
    <div class="status hidden" id="error">ç½‘ç»œåŠ è½½å¤±è´¥(å¯ç¨ååˆ·æ–°)</div>
    <!-- è§†é¢‘åˆ—è¡¨ -->
    <div class="video-list hidden" id="list"></div>

    <!-- åº•éƒ¨å¯¼èˆªï¼ˆä½ çš„åŸæ ·å¼ï¼‰ -->
    <div class="nav">
        <a href="javascript:;"><i class="fas fa-home"></i> é¦–é¡µ</a>
        <a href="javascript:;"><i class="fas fa-search"></i> æœç´¢</a>
        <a href="javascript:;"><i class="fas fa-bell"></i> åŠ¨æ€</a>
        <a href="javascript:;"><i class="fas fa-user"></i> æˆ‘çš„</a>
    </div>
    <div style="text-align:center;padding:20px;color:#999;">æœç´¢ç»“æœ åŠ¨æ€åŠŸèƒ½å¼€å‘ä¸­... æˆ‘çš„ç©ºé—´å¼€å‘ä¸­...</div>

    <script>
        const refresh = document.getElementById('refresh');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');
        const list = document.getElementById('list');
        // å›½å†…å¯ç”¨è·¨åŸŸä»£ç† + Bç«™çƒ­é—¨API
        const PROXY = 'https://proxy.7ed.net/';
        const BILI_API = 'https://api.bilibili.com/x/web-interface/ranking/v2?rid=0&t='+Date.now();

        // åˆ·æ–°è¯·æ±‚æ•°æ®
        async function getBiliData() {
            loading.classList.remove('hidden');
            error.classList.add('hidden');
            list.classList.add('hidden');
            try {
                const res = await fetch(PROXY + BILI_API, {timeout:10000});
                const data = await res.json();
                if (data.code === 0 && data.data.list) {
                    renderList(data.data.list);
                    loading.classList.add('hidden');
                    list.classList.remove('hidden');
                } else {
                    throw new Error();
                }
            } catch (e) {
                loading.classList.add('hidden');
                error.classList.remove('hidden');
            }
        }

        // æ¸²æŸ“è§†é¢‘åˆ—è¡¨ï¼ˆå¸¦å›¾ç‰‡ï¼‰
        function renderList(data) {
            list.innerHTML = data.slice(0,6).map(item => `
                <a class="video-card" href="https://b23.tv/${item.bvid}" target="_blank">
                    <img src="${item.pic}@480w_300h.webp" alt="${item.title}" onerror="this.src='https://picsum.photos/480/300'">
                    <p>${item.title.slice(0,20)}...</p>
                </a>
            `).join('');
        }

        // ç‚¹å‡»åˆ·æ–°è§¦å‘ + é¡µé¢åŠ è½½è‡ªåŠ¨è¯·æ±‚
        refresh.onclick = getBiliData;
        window.onload = getBiliData;
    </script>
</body>
</html>
